<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Create Database | Reproducible Science Project</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Create Database | Reproducible Science Project" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Create Database | Reproducible Science Project" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Sara Wall" />


<meta name="date" content="2021-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="literature.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Reproducible Science Project</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i><b>2</b> Create Database</a><ul>
<li class="chapter" data-level="2.1" data-path="database.html"><a href="database.html#step-1.-load-packages-and-connect-to-the-sql-database"><i class="fa fa-check"></i><b>2.1</b> Step 1. Load packages and connect to the SQL database</a></li>
<li class="chapter" data-level="2.2" data-path="database.html"><a href="database.html#step-2.-create-df_locations-table"><i class="fa fa-check"></i><b>2.2</b> Step 2. Create DF_Locations Table</a></li>
<li class="chapter" data-level="2.3" data-path="database.html"><a href="database.html#step-3.-create-catchment-characteristics-table"><i class="fa fa-check"></i><b>2.3</b> Step 3. Create Catchment Characteristics Table</a></li>
<li class="chapter" data-level="2.4" data-path="database.html"><a href="database.html#step-4.-create-grain-size-distribution-table"><i class="fa fa-check"></i><b>2.4</b> Step 4. Create Grain Size Distribution Table</a></li>
<li class="chapter" data-level="2.5" data-path="database.html"><a href="database.html#step-5.-create-volume-data-table"><i class="fa fa-check"></i><b>2.5</b> Step 5. Create Volume Data Table</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>3</b> Literature</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>5</b> Applications</a><ul>
<li class="chapter" data-level="5.1" data-path="applications.html"><a href="applications.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="applications.html"><a href="applications.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>6</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Science Project</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="database" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Create Database</h1>
<p>This document will create a database for my MS Research Data.</p>
<p>The database will follow the following structure:</p>
<div class="figure" style="text-align: center"><span id="fig:image"></span>
<img src="database_structure.JPG" alt="Database Structure" width="80%" />
<p class="caption">
Figure 2.1: Database Structure
</p>
</div>
<p>The data in this database is compiled from primary fieldwork and from data found in the literature. For each post-fire debris flow characterized, location, grain size, volume, and catchment characteristics are provided. Each debris flow fan is characterized once and therefore the site_id for each fan is used as the Primary Key in all data sets in the database.</p>
<div id="step-1.-load-packages-and-connect-to-the-sql-database" class="section level2">
<h2><span class="header-section-number">2.1</span> Step 1. Load packages and connect to the SQL database</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="database.html#cb1-1"></a><span class="co"># Load packages ####</span></span>
<span id="cb1-2"><a href="database.html#cb1-2"></a></span>
<span id="cb1-3"><a href="database.html#cb1-3"></a><span class="kw">library</span>(DBI)</span>
<span id="cb1-4"><a href="database.html#cb1-4"></a><span class="kw">library</span>(RSQLite)</span></code></pre></div>
<pre><code>## Warning: package &#39;RSQLite&#39; was built under R version 4.0.3</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="database.html#cb3-1"></a><span class="kw">library</span>(rlang)</span></code></pre></div>
<pre><code>## Warning: package &#39;rlang&#39; was built under R version 4.0.3</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="database.html#cb5-1"></a><span class="co"># Establish database connection ####</span></span>
<span id="cb5-2"><a href="database.html#cb5-2"></a></span>
<span id="cb5-3"><a href="database.html#cb5-3"></a>debrisflow_db &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(<span class="dt">drv =</span> RSQLite<span class="op">::</span><span class="kw">SQLite</span>(), <span class="st">&quot;database/MS_research_db.db&quot;</span>)</span></code></pre></div>
</div>
<div id="step-2.-create-df_locations-table" class="section level2">
<h2><span class="header-section-number">2.2</span> Step 2. Create DF_Locations Table</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="database.html#cb6-1"></a><span class="kw">dbExecute</span>(debrisflow_db, <span class="st">&quot;CREATE TABLE DF_locations (</span></span>
<span id="cb6-2"><a href="database.html#cb6-2"></a><span class="st">          Site_id varchar(50),</span></span>
<span id="cb6-3"><a href="database.html#cb6-3"></a><span class="st">          Fire varchar(50),</span></span>
<span id="cb6-4"><a href="database.html#cb6-4"></a><span class="st">          fire_year varchar(5),</span></span>
<span id="cb6-5"><a href="database.html#cb6-5"></a><span class="st">          Source varchar(50),</span></span>
<span id="cb6-6"><a href="database.html#cb6-6"></a><span class="st">          year_surveyed varchar(5),</span></span>
<span id="cb6-7"><a href="database.html#cb6-7"></a><span class="st">          Lat double,</span></span>
<span id="cb6-8"><a href="database.html#cb6-8"></a><span class="st">          long double, PRIMARY KEY (Site_id));</span></span>
<span id="cb6-9"><a href="database.html#cb6-9"></a><span class="st">          &quot;</span>)</span>
<span id="cb6-10"><a href="database.html#cb6-10"></a></span>
<span id="cb6-11"><a href="database.html#cb6-11"></a>DF_locations &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;DF_locations.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb6-12"><a href="database.html#cb6-12"></a></span>
<span id="cb6-13"><a href="database.html#cb6-13"></a><span class="kw">names</span>(DF_locations)</span>
<span id="cb6-14"><a href="database.html#cb6-14"></a></span>
<span id="cb6-15"><a href="database.html#cb6-15"></a><span class="kw">dbWriteTable</span>(debrisflow_db, <span class="st">&quot;DF_locations&quot;</span>, DF_locations, <span class="dt">append=</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="database.html#cb7-1"></a><span class="co">#Check table</span></span>
<span id="cb7-2"><a href="database.html#cb7-2"></a><span class="kw">dbGetQuery</span>(debrisflow_db, <span class="st">&quot;SELECT * FROM DF_locations LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##           Site_id              Fire fire_year            Source year_surveyed
## 1     Brianhead 1         Brianhead      2017 Primary Fieldwork          2020
## 2     Brianhead 2         Brianhead      2017 Primary Fieldwork          2020
## 3     Brianhead 3         Brianhead      2017 Primary Fieldwork          2020
## 4   Brianhead 3.2         Brianhead      2017 Primary Fieldwork          2020
## 5     Brianhead 4         Brianhead      2017 Primary Fieldwork          2020
## 6  Clay Springs 1 Clay Springs Fire      2012 Primary Fieldwork          2020
## 7  Clay Springs 2 Clay Springs Fire      2012 Primary Fieldwork          2020
## 8    Dairy Fork 1  Coal Hollow Fire      2018 Primary Fieldwork          2020
## 9    Dairy Fork 2  Coal Hollow Fire      2018 Primary Fieldwork          2020
## 10 Dollar Ridge 1 Dollar Ridge Fire      2018 Primary Fieldwork          2020
##         Lat      long
## 1  37.74776 -112.7887
## 2  37.74148 -112.7932
## 3  37.72436 -112.7062
## 4        NA        NA
## 5  37.75856 -112.7941
## 6  39.35653 -112.1648
## 7  39.33334 -112.1507
## 8  39.95080 -111.3493
## 9  39.95397 -111.3477
## 10 40.12092 -110.7446</code></pre>
</div>
<div id="step-3.-create-catchment-characteristics-table" class="section level2">
<h2><span class="header-section-number">2.3</span> Step 3. Create Catchment Characteristics Table</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="database.html#cb9-1"></a><span class="kw">dbExecute</span>(debrisflow_db, <span class="st">&quot;CREATE TABLE catchments (</span></span>
<span id="cb9-2"><a href="database.html#cb9-2"></a><span class="st">          Site_id varchar(50),</span></span>
<span id="cb9-3"><a href="database.html#cb9-3"></a><span class="st">          cat_area float, </span></span>
<span id="cb9-4"><a href="database.html#cb9-4"></a><span class="st">          relief float, </span></span>
<span id="cb9-5"><a href="database.html#cb9-5"></a><span class="st">          mean_cat_elev float,</span></span>
<span id="cb9-6"><a href="database.html#cb9-6"></a><span class="st">          himod_perc float, </span></span>
<span id="cb9-7"><a href="database.html#cb9-7"></a><span class="st">          himod_area float, </span></span>
<span id="cb9-8"><a href="database.html#cb9-8"></a><span class="st">          slope23_perc float, </span></span>
<span id="cb9-9"><a href="database.html#cb9-9"></a><span class="st">          sort_unsort char(10), </span></span>
<span id="cb9-10"><a href="database.html#cb9-10"></a><span class="st">          clast_matrix char(10), </span></span>
<span id="cb9-11"><a href="database.html#cb9-11"></a><span class="st">          strat char(10), </span></span>
<span id="cb9-12"><a href="database.html#cb9-12"></a><span class="st">          boulder_perc float, </span></span>
<span id="cb9-13"><a href="database.html#cb9-13"></a><span class="st">          dom_lith char(20), </span></span>
<span id="cb9-14"><a href="database.html#cb9-14"></a><span class="st">          Lith_type char(20), </span></span>
<span id="cb9-15"><a href="database.html#cb9-15"></a><span class="st">          X2yr_storm float, </span></span>
<span id="cb9-16"><a href="database.html#cb9-16"></a><span class="st">          X100yr_storm float,</span></span>
<span id="cb9-17"><a href="database.html#cb9-17"></a><span class="st">          Al2O3Ws float, CaOWs float, Fe2O3Ws float, K2OWs float, MgOWs float,</span></span>
<span id="cb9-18"><a href="database.html#cb9-18"></a><span class="st">          Na2OWs float, NWs float, P2O5Ws float, SiO2Ws float, </span></span>
<span id="cb9-19"><a href="database.html#cb9-19"></a><span class="st">          PctAlluvCoastWs float,</span></span>
<span id="cb9-20"><a href="database.html#cb9-20"></a><span class="st">          PctEolFineWs float, PctCarbResidWs float, PctNonCarbResidWs float, </span></span>
<span id="cb9-21"><a href="database.html#cb9-21"></a><span class="st">          PctSilicicWs float, CompStrgthWs float, HydrlCondWs float,</span></span>
<span id="cb9-22"><a href="database.html#cb9-22"></a><span class="st">          AvgWetIndxWs float, ClayWs float, AgKffactWs float, PermWs float,</span></span>
<span id="cb9-23"><a href="database.html#cb9-23"></a><span class="st">          RckdepWs float, OmWs float, SandWs float,PctBl2011Ws float,</span></span>
<span id="cb9-24"><a href="database.html#cb9-24"></a><span class="st">          PctConif2011Ws float, </span></span>
<span id="cb9-25"><a href="database.html#cb9-25"></a><span class="st">          PctDecid2011Ws float, PctGrs2011Ws float,PctHay2011Ws float,</span></span>
<span id="cb9-26"><a href="database.html#cb9-26"></a><span class="st">          PctHbWet2011Ws float, PctMxFst2011Ws float, PctShrb2011Ws float,</span></span>
<span id="cb9-27"><a href="database.html#cb9-27"></a><span class="st">          Precip8110Ws float, RunoffWs float, Tmean8110Ws float, WtDepWs float</span></span>
<span id="cb9-28"><a href="database.html#cb9-28"></a></span>
<span id="cb9-29"><a href="database.html#cb9-29"></a><span class="st">          PRIMARY KEY (Site_id));</span></span>
<span id="cb9-30"><a href="database.html#cb9-30"></a><span class="st">          &quot;</span>)</span>
<span id="cb9-31"><a href="database.html#cb9-31"></a></span>
<span id="cb9-32"><a href="database.html#cb9-32"></a>catchments &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;catchments.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb9-33"><a href="database.html#cb9-33"></a></span>
<span id="cb9-34"><a href="database.html#cb9-34"></a><span class="kw">names</span>(catchments)</span>
<span id="cb9-35"><a href="database.html#cb9-35"></a></span>
<span id="cb9-36"><a href="database.html#cb9-36"></a><span class="kw">dbWriteTable</span>(debrisflow_db, <span class="st">&quot;catchments&quot;</span>, catchments, <span class="dt">append=</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="database.html#cb10-1"></a><span class="co">#Check table</span></span>
<span id="cb10-2"><a href="database.html#cb10-2"></a><span class="kw">dbGetQuery</span>(debrisflow_db, <span class="st">&quot;SELECT * FROM catchments LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##           Site_id cat_area relief mean_cat_elev himod_perc himod_area
## 1     Brianhead 1     0.36    305          2631         54       0.19
## 2     Brianhead 2     2.98    744          2924         45       1.34
## 3     Brianhead 3     0.62    276          2832         81       0.50
## 4   Brianhead 3.2     0.62    276          2832         81       0.50
## 5     Brianhead 4     2.10    473          2575          8       0.17
## 6  Clay Springs 1     4.01    901          2269         36       1.44
## 7  Clay Springs 2     2.07   1029          2154          7       0.14
## 8    Dairy Fork 1     2.12    583          2141         63       1.34
## 9    Dairy Fork 2     1.01    309          1993         48       0.48
## 10 Dollar Ridge 1     0.15    225          2054         17       0.03
##    slope23_perc sort_unsort clast_matrix          strat boulder_perc GSD_Q
## 1          15.5    unsorted       clast  not stratified           10     4
## 2          14.0    unsorted       matrix not stratified            5     5
## 3          13.0     sorted        matrix    stratified            10     4
## 4          13.0                                                   NA    NA
## 5          54.0    unsorted       matrix not stratified            3     4
## 6          65.0    unsorted        clast not stratified            5     4
## 7          56.0    unsorted        clast not stratified            3     3
## 8           5.0      sorted       matrix not stratified            5     3
## 9           3.0    unsorted       matrix not stratified            2     4
## 10         26.0      sorted       matrix not stratified           10     4
##    Vol_Q  dom_lith   Lith_type X2yr_storm X100yr_storm Al2O3Ws CaOWs Fe2O3Ws
## 1      4  volcanic     igneous       5.09        15.48   12.23  9.80    4.82
## 2      5  volcanic     igneous       5.33        16.07   11.88 10.54    4.70
## 3      4  volcanic     igneous       4.92        15.10   14.86  3.73    5.62
## 4     NA  volcanic     igneous       4.92        15.10      NA    NA      NA
## 5      3 Limestone sedimentary       4.63        14.33    9.45 15.46    3.85
## 6      3 Limestone sedimentary       3.28        10.18   10.56  4.92    8.33
## 7      2 Limestone sedimentary       3.15         9.93   10.56  4.92    8.33
## 8      3  mudstone sedimentary       3.35        10.77    6.91 17.10    2.57
## 9      2  mudstone sedimentary       3.33        10.71    6.57 18.32    2.50
## 10     3 sandstone sedimentary       2.75         9.20    6.80 18.60    2.63
##    K2OWs MgOWs Na2OWs  NWs P2O5Ws   SiO2Ws PctAlluvCoastWs PctEolFineWs
## 1   2.63  2.53   2.74 0.03   0.16 55.38075            0.00            0
## 2   2.57  2.57   2.63 0.04   0.16 54.27291            0.00            0
## 3   3.17  2.03   3.60 0.03   0.18 64.69118            0.00            0
## 4     NA    NA     NA   NA     NA       NA              NA           NA
## 5   2.16  3.04   1.84 0.04   0.14 46.56477            0.00            0
## 6   2.15  2.41   1.05 0.17   0.14 54.65962           64.51            0
## 7   2.15  2.41   1.05 0.17   0.14 54.65962           64.51            0
## 8   1.54  3.12   0.93 0.12   0.18 41.36917            0.00            0
## 9   1.54  3.59   0.90 0.11   0.18 39.28827            0.00            0
## 10  1.53  3.51   1.02 0.11   0.19 39.05255            0.02            0
##    PctCarbResidWs PctNonCarbResidWs PctSilicicWs CompStrgthWs HydrlCondWs
## 1            0.00             28.13        71.87        70.24        0.03
## 2            0.00             13.77        86.23        70.42        0.03
## 3            0.00              0.00       100.00        72.66        0.04
## 4              NA                NA           NA           NA          NA
## 5            0.00             45.32        54.68        71.26        0.03
## 6           12.08             23.41         0.00        30.00        3.77
## 7           12.08             23.41         0.00        30.00        3.77
## 8            0.00            100.00         0.00        76.74        0.02
## 9            0.00            100.00         0.00        77.29        0.03
## 10           0.00             99.98         0.00        79.03        0.02
##    AvgWetIndxWs ClayWs AgKffactWs PermWs RckdepWs OmWs SandWs PctBl2011Ws
## 1        310.24  34.97          0   1.21   147.05 0.76  22.76        1.09
## 2        317.89  31.03          0   2.51   145.97 0.64  28.55        4.62
## 3        349.50  35.00          0   1.20   147.06 0.76  22.57        0.04
## 4            NA     NA         NA     NA       NA   NA     NA          NA
## 5        300.02  32.94          0   1.88   146.50 0.70  25.67        4.26
## 6        431.81  20.43          0   6.93   123.86 0.93  37.31        0.39
## 7        431.81  20.43          0   6.93   123.86 0.93  37.31        0.39
## 8        338.03  22.87          0   4.70   108.43 0.56  38.65        0.00
## 9        296.74  22.23          0   4.73   108.81 0.67  38.79        0.03
## 10       262.52  20.38          0   6.06   101.72 1.31  36.53        9.20
##    PctConif2011Ws PctDecid2011Ws PctGrs2011Ws PctHay2011Ws PctHbWet2011Ws
## 1           56.23           1.82         0.18         0.00              0
## 2           52.72           6.22         1.87         0.00              0
## 3           43.61          19.17         0.19         0.00              0
## 4              NA             NA           NA           NA             NA
## 5           62.20           3.78         1.00         0.00              0
## 6           33.24           2.27        13.81         0.42              0
## 7           33.24           2.27        13.81         0.42              0
## 8           15.68          61.01         0.00         0.00              0
## 9           43.59          34.90         0.00         0.00              0
## 10          46.11           5.33         0.06         0.11              0
##    PctMxFst2011Ws PctShrb2011Ws Precip8110Ws RunoffWs Tmean8110Ws WtDepWs
## 1           39.61          1.00       756.61    30.00        4.62  182.88
## 2           31.22          3.27       859.86    30.21        3.35  182.88
## 3           31.50          4.98       690.55    38.65        3.77  182.88
## 4              NA            NA           NA       NA          NA      NA
## 5           25.00          3.59       776.01    30.11        4.23  182.88
## 6            0.01         49.59       404.38    29.00        8.96  182.88
## 7            0.01         49.59       404.38    29.00        8.96  182.88
## 8            0.00         23.31       572.16   248.00        6.99  182.88
## 9            0.21         21.21       565.32   248.00        6.84  182.88
## 10           1.24         37.45       519.64    57.78        5.03  181.97</code></pre>
</div>
<div id="step-4.-create-grain-size-distribution-table" class="section level2">
<h2><span class="header-section-number">2.4</span> Step 4. Create Grain Size Distribution Table</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="database.html#cb12-1"></a><span class="kw">dbExecute</span>(debrisflow_db, <span class="st">&quot;CREATE TABLE GSD (</span></span>
<span id="cb12-2"><a href="database.html#cb12-2"></a><span class="st">          Site_id varchar(50),</span></span>
<span id="cb12-3"><a href="database.html#cb12-3"></a><span class="st">          subD16 float,</span></span>
<span id="cb12-4"><a href="database.html#cb12-4"></a><span class="st">          subD50 float,</span></span>
<span id="cb12-5"><a href="database.html#cb12-5"></a><span class="st">          subD84 float,</span></span>
<span id="cb12-6"><a href="database.html#cb12-6"></a><span class="st">          D84B float,</span></span>
<span id="cb12-7"><a href="database.html#cb12-7"></a><span class="st">          surD16 float,</span></span>
<span id="cb12-8"><a href="database.html#cb12-8"></a><span class="st">          surD50 float,</span></span>
<span id="cb12-9"><a href="database.html#cb12-9"></a><span class="st">          surD84 float,</span></span>
<span id="cb12-10"><a href="database.html#cb12-10"></a><span class="st">          subD50range float,</span></span>
<span id="cb12-11"><a href="database.html#cb12-11"></a><span class="st">          sub_var float, </span></span>
<span id="cb12-12"><a href="database.html#cb12-12"></a><span class="st">          sur_var float, </span></span>
<span id="cb12-13"><a href="database.html#cb12-13"></a><span class="st">          PRIMARY KEY (Site_id));</span></span>
<span id="cb12-14"><a href="database.html#cb12-14"></a><span class="st">          &quot;</span>)</span>
<span id="cb12-15"><a href="database.html#cb12-15"></a></span>
<span id="cb12-16"><a href="database.html#cb12-16"></a>GSD &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;GSD_data.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb12-17"><a href="database.html#cb12-17"></a></span>
<span id="cb12-18"><a href="database.html#cb12-18"></a><span class="kw">names</span>(GSD)</span>
<span id="cb12-19"><a href="database.html#cb12-19"></a></span>
<span id="cb12-20"><a href="database.html#cb12-20"></a><span class="kw">dbWriteTable</span>(debrisflow_db, <span class="st">&quot;GSD&quot;</span>, GSD, <span class="dt">append=</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="database.html#cb13-1"></a><span class="co">#Check table</span></span>
<span id="cb13-2"><a href="database.html#cb13-2"></a><span class="kw">dbGetQuery</span>(debrisflow_db, <span class="st">&quot;SELECT * FROM GSD LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##           Site_id subD16 subD50 subD84   D84B surD16 surD50 surD84 subD50range
## 1     Brianhead 1   1.81  12.71  33.94 1116.0  13.67  30.08  50.59        3.72
## 2     Brianhead 2   1.00  12.40  54.62  527.0  11.58  30.29  51.53        6.82
## 3     Brianhead 3   0.33  11.85  55.86  537.5  12.15  40.99  74.31       40.22
## 4   Brianhead 3.2     NA     NA     NA     NA     NA     NA     NA          NA
## 5     Brianhead 4   1.68  21.61  58.63  820.0  19.30  31.65  53.75        5.05
## 6  Clay Springs 1   1.08  10.51  40.23  380.0  11.43  40.23  72.48        1.40
## 7  Clay Springs 2  13.15  32.95  58.78     NA  16.96  26.36  43.17          NA
## 8    Dairy Fork 1   2.62  13.97  57.36  540.0   6.63  20.95  38.26        3.37
## 9    Dairy Fork 2   0.90   4.78  13.58  490.0   2.00   8.25  19.30          NA
## 10 Dollar Ridge 1   0.53   6.88  56.88  860.0  19.21  32.26  55.90        0.43
##    sub_var sur_var
## 1     4.23    1.89
## 2     5.77    2.15
## 3     7.40    2.61
## 4       NA      NA
## 5     5.13    1.48
## 6     5.22    2.66
## 7     2.16    1.35
## 8     4.45    2.53
## 9     3.92    3.27
## 10    6.75    1.54</code></pre>
</div>
<div id="step-5.-create-volume-data-table" class="section level2">
<h2><span class="header-section-number">2.5</span> Step 5. Create Volume Data Table</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="database.html#cb15-1"></a><span class="kw">dbExecute</span>(debrisflow_db, <span class="st">&quot;CREATE TABLE volume (</span></span>
<span id="cb15-2"><a href="database.html#cb15-2"></a><span class="st">          obsVol_min varchar(50),</span></span>
<span id="cb15-3"><a href="database.html#cb15-3"></a><span class="st">          obsVol float,</span></span>
<span id="cb15-4"><a href="database.html#cb15-4"></a><span class="st">          obsVol_max float,</span></span>
<span id="cb15-5"><a href="database.html#cb15-5"></a><span class="st">          G08_vol2yr_min float,</span></span>
<span id="cb15-6"><a href="database.html#cb15-6"></a><span class="st">          G08_vol2yr float,</span></span>
<span id="cb15-7"><a href="database.html#cb15-7"></a><span class="st">          G08_vol2yr_max float,</span></span>
<span id="cb15-8"><a href="database.html#cb15-8"></a><span class="st">          G08_vol100yr_min float,</span></span>
<span id="cb15-9"><a href="database.html#cb15-9"></a><span class="st">          G08_vol100yr float,</span></span>
<span id="cb15-10"><a href="database.html#cb15-10"></a><span class="st">          G08_vol100yr_max float,</span></span>
<span id="cb15-11"><a href="database.html#cb15-11"></a><span class="st">          G14_vol2yr_min float, </span></span>
<span id="cb15-12"><a href="database.html#cb15-12"></a><span class="st">          G14_vol2yr float,</span></span>
<span id="cb15-13"><a href="database.html#cb15-13"></a><span class="st">          G14_vol2yr_max float,</span></span>
<span id="cb15-14"><a href="database.html#cb15-14"></a><span class="st">          G14_vol100yr_min float, </span></span>
<span id="cb15-15"><a href="database.html#cb15-15"></a><span class="st">          G14_vol100yr float,</span></span>
<span id="cb15-16"><a href="database.html#cb15-16"></a><span class="st">          G14_vol100yr_max float,</span></span>
<span id="cb15-17"><a href="database.html#cb15-17"></a><span class="st">          PRIMARY KEY (Site_id));</span></span>
<span id="cb15-18"><a href="database.html#cb15-18"></a><span class="st">          &quot;</span>)</span>
<span id="cb15-19"><a href="database.html#cb15-19"></a></span>
<span id="cb15-20"><a href="database.html#cb15-20"></a>volume &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;DF_Volume_data.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb15-21"><a href="database.html#cb15-21"></a></span>
<span id="cb15-22"><a href="database.html#cb15-22"></a><span class="kw">names</span>(volume)</span>
<span id="cb15-23"><a href="database.html#cb15-23"></a></span>
<span id="cb15-24"><a href="database.html#cb15-24"></a><span class="kw">dbWriteTable</span>(debrisflow_db, <span class="st">&quot;volume&quot;</span>, volume, <span class="dt">append=</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="database.html#cb16-1"></a><span class="co">#Check table</span></span>
<span id="cb16-2"><a href="database.html#cb16-2"></a><span class="kw">dbGetQuery</span>(debrisflow_db, <span class="st">&quot;SELECT * FROM volume LIMIT 10;&quot;</span>)</span></code></pre></div>
<pre><code>##           Site_id obsVol_min  obsVol obsVol_max G08_vol2yr_min  G08_vol2yr
## 1     Brianhead 1    73.1250   97.50   131.6250      117.86806    943.4712
## 2     Brianhead 2   468.7500  625.00   843.7500      503.77232   4032.4298
## 3     Brianhead 3  1350.0000 1800.00  2430.0000      218.57784   1749.5996
## 4   Brianhead 3.2   399.0000  532.00   718.2000      711.47298   5694.9633
## 5     Brianhead 4  1141.8750 1522.50  2055.3750     1363.30468  10912.5299
## 6  Clay Springs 1   140.2500  187.00   252.4500      680.62099   5448.0095
## 7  Clay Springs 2   130.5000  174.00   234.9000      310.77948   2487.6247
## 8    Dairy Fork 1    27.1875   36.25    48.9375      204.96535   1640.6388
## 9    Dairy Fork 2   993.7500 1325.00  1788.7500       78.84295    631.0960
## 10 Dollar Ridge 1  5250.0000 7000.00  9450.0000    13357.70775 106921.3564
##    G08_vol2yr_max G08_vol100yr_min G08_vol100yr G08_vol100yr_max G14_vol2yr_min
## 1        7551.986         76.98279     616.2063         4932.404      110.01438
## 2       32277.459        324.97765    2601.2735        20821.813      805.88558
## 3       14004.615        142.36557    1139.5608         9121.579      136.56922
## 4       45585.157        477.27337    3820.3199        30579.632      174.91993
## 5       87349.007       1027.20720    8222.2481        65814.729      973.26510
## 6       43608.423        518.32663    4148.9294        33209.976      548.34744
## 7       19912.115        229.43772    1836.5271        14700.424      444.47567
## 8       13132.442        151.40054    1211.8810         9700.463      131.13507
## 9        5051.588         60.46193     483.9656         3873.888       30.44355
## 10     855848.674       9922.14946   79421.5369       635727.224     5614.71204
##    G14_vol2yr G14_vol2yr_max G14_vol100yr_min G14_vol100yr G14_vol100yr_max
## 1    880.6066       7048.789        211.70029    1694.5484        13563.960
## 2   6450.6861      51634.316       1563.94325   12518.5351       100204.225
## 3   1093.1641       8750.198        261.71595    2094.8972        16768.540
## 4   1400.1411      11207.386        330.79300    2647.8223        21194.411
## 5   7790.4703      62358.577       1666.82324   13342.0348       106795.903
## 6   4389.2300      35133.455        937.94561    7507.7565        60095.604
## 7   3557.7917      28478.233        782.87071    6266.4642        50159.718
## 8   1049.6666       8402.024        230.64137    1846.1617        14777.544
## 9    243.6845       1950.565         52.04251     416.5727         3334.443
## 10 44942.7880     359743.149       9598.77383   76833.0868       615008.054</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="literature.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Reproducible Science Project.pdf", "Reproducible Science Project.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
